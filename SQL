CREATE TABLE IF NOT EXISTS MusicCategory (
	id SERIAL PRIMARY KEY,
	name VARCHAR(60) NOT NULL
);

CREATE TABLE IF NOT EXISTS Singer (
	id SERIAL PRIMARY KEY,
	album VARCHAR(60) NOT NULL,
	name VARCHAR(40) NOT NULL
);

CREATE TABLE IF NOT EXISTS MusicCategorySinger (
	MusicCategory_id INTEGER REFERENCES MusicCategory(id),
	Singer_id INTEGER REFERENCES Singer(id),
	CONSTRAINT MS PRIMARY KEY (MusicCategory_id, Singer_id)
);

CREATE TABLE IF NOT EXISTS Album (
	id SERIAL PRIMARY KEY,
	name VARCHAR(60) UNIQUE,
	track VARCHAR(60) NOT NULL,
	year_when_appeared INT CHECK(year >0 AND year < 2500)
);


CREATE TABLE IF NOT EXISTS AlbumSinger (
	Album_id INTEGER REFERENCES Album(id),
	Singer_id INTEGER REFERENCES Singer(id),
	CONSTRAINT SA PRIMARY KEY (Album_id, Singer_id)
);

CREATE TABLE IF NOT EXISTS Track (
	id SERIAL PRIMARY KEY REFERENCES Album(id),
	name VARCHAR(40) UNIQUE,
	play_time CHECK(play_time >0 AND play_time < 500)
);

CREATE TABLE IF NOT EXISTS Sbornik (
	id SERIAL PRIMARY KEY,
	name VARCHAR(40) NOT NULL,
	year INT CHECK(year >0 AND year < 2500)
);

CREATE TABLE IF NOT EXISTS SbornikTrack (
	Track_id INTEGER REFERENCES Track(id),
	Sbornik_id INTEGER REFERENCES Sbornik(id),
	CONSTRAINT SAT PRIMARY KEY (Track_id, Sbornik_id)
);
